"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("prop-types"),r=require("signature_pad"),a=require("throttle-debounce");function i(e){var t=Object.create(null);return e&&Object.keys(e).forEach(function(r){if("default"!==r){var a=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(t,r,a.get?a:{enumerable:!0,get:function(){return e[r]}})}}),t.default=e,Object.freeze(t)}var s=i(e),n=i(t);class o extends s.PureComponent{constructor(e){super(e),Object.defineProperty(this,"canvasRef",{enumerable:!0,configurable:!0,writable:!0,value:s.createRef()}),Object.defineProperty(this,"signaturePad",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"callResizeHandler",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.state={canvasWidth:0,canvasHeight:0},this.callResizeHandler=a.debounce(this.props.debounceInterval,this.handleResize.bind(this))}componentDidMount(){const e=this.canvasRef.current;e&&(this.props.width&&this.props.height||(e.style.width="100%",window.addEventListener("resize",this.callResizeHandler)),this.signaturePad=new r(e,this.props.options),this.scaleCanvas(e))}componentWillUnmount(){this.props.width&&this.props.height||window.removeEventListener("resize",this.callResizeHandler),this.signaturePad.off()}get instance(){return this.signaturePad}get canvas(){return this.canvasRef}set dotSize(e){this.signaturePad.dotSize=e}get dotSize(){return this.signaturePad.dotSize}set minWidth(e){this.signaturePad.minWidth=e}get minWidth(){return this.signaturePad.minWidth}set maxWidth(e){this.signaturePad.maxWidth=e}get maxWidth(){return this.signaturePad.maxWidth}set throttle(e){this.signaturePad.throttle=e}get throttle(){return this.signaturePad.throttle}set backgroundColor(e){this.signaturePad.backgroundColor=e}get backgroundColor(){return this.signaturePad.backgroundColor}set penColor(e){this.signaturePad.penColor=e}get penColor(){return this.signaturePad.penColor}set velocityFilterWeight(e){this.signaturePad.velocityFilterWeight=e}get velocityFilterWeight(){return this.signaturePad.velocityFilterWeight}isEmpty(){return this.signaturePad.isEmpty()}clear(){this.signaturePad.clear()}redraw(){this.signaturePad.redraw()}fromDataURL(e,t={}){this.signaturePad.fromDataURL(e,t)}toDataURL(e,t){return this.signaturePad.toDataURL(e,t)}toSvgDataUrl(e){return this.signaturePad.toDataURL("image/svg+xml",e)}toSVG(e){return this.signaturePad.toSVG(e)}fromData(e){this.signaturePad.fromData(e)}toData(){return this.signaturePad.toData()}off(){this.signaturePad.off()}on(){this.signaturePad.on()}handleResize(){const e=this.canvasRef.current;e&&this.scaleCanvas(e)}scaleCanvas(e){const t=Math.max(window.devicePixelRatio||1,1),r=(this.props.width||e.offsetWidth)*t,a=(this.props.height||e.offsetHeight)*t,{canvasWidth:i,canvasHeight:s}=this.state;if(r===i&&a===s)return;e.width=r,e.height=a,this.setState({canvasWidth:r,canvasHeight:a});const n=e.getContext("2d");n&&n.scale(t,t),this.props.redrawOnResize&&this.signaturePad&&this.redraw()}render(){const{canvasProps:e}=this.props;return s.createElement("canvas",Object.assign({"data-testid":"canvas-element",ref:this.canvasRef},e))}}Object.defineProperty(o,"displayName",{enumerable:!0,configurable:!0,writable:!0,value:"react-signature-pad-wrapper"}),Object.defineProperty(o,"propTypes",{enumerable:!0,configurable:!0,writable:!0,value:{width:n.number,height:n.number,options:n.object,canvasProps:n.object,redrawOnResize:n.bool,debounceInterval:n.number}}),Object.defineProperty(o,"defaultProps",{enumerable:!0,configurable:!0,writable:!0,value:{redrawOnResize:!1,debounceInterval:150}}),exports.default=o;
